import { useAppContext } from '../../context/store';
import styles from '../SearchTerms/SearchTerms.module.css';

export default function SearchTerms(props) {
  const state = useAppContext();
  const { setSearchParams, searchBusinesses, clearBusinesses, term, location, sortBy } = state;
  const terms = [
    {name:'Restaurants' , icon:'M14.859 11.531l-1.453 1.453 6.891 6.891-1.406 1.406-6.891-6.891-6.891 6.891-1.406-1.406 9.75-9.75q-0.563-1.125-0.164-2.625t1.57-2.672q1.453-1.453 3.234-1.664t2.859 0.867 0.867 2.883-1.664 3.258q-1.172 1.172-2.672 1.547t-2.625-0.188zM8.109 13.359l-4.219-4.219q-1.172-1.172-1.172-2.813t1.172-2.813l7.031 6.984z'},
    {name:'Shopping' , icon:'M12 17.016q0.797 0 1.406-0.609t0.609-1.406-0.609-1.406-1.406-0.609-1.406 0.609-0.609 1.406 0.609 1.406 1.406 0.609zM9 9h6l-3-4.406zM17.203 9h4.781q0.422 0 0.727 0.281t0.305 0.703q-0.469 1.875-1.406 5.273t-1.172 4.289q-0.422 1.453-1.922 1.453h-13.031q-1.5 0-1.922-1.453l-2.531-9.281q-0.047-0.094-0.047-0.281 0-0.422 0.305-0.703t0.727-0.281h4.781l4.359-6.563q0.281-0.422 0.844-0.422 0.609 0 0.844 0.422z'},
    {name:'Nightlife' , icon:'M17.016 5.016h4.969v3h-3v9q0 1.219-0.891 2.109t-2.109 0.891-2.109-0.891-0.891-2.109 0.891-2.109 2.109-0.891q0.609 0 1.031 0.141v-9.141zM10.078 9l1.406-2.016h-6.984l1.406 2.016h4.172zM0.984 5.016h14.016l-6 9v3.984h2.016v2.016h-6v-2.016h1.969v-3.984z'},
    {name:'Sports & Leisure' , icon:'M18.047 17.203q1.969-2.25 1.969-5.203 0-0.094-0.023-0.188t-0.023-0.141l-0.984-0.75-1.406 0.469-1.453 4.359 0.797 1.359zM14.25 15l1.359-4.031-3.609-2.531-3.609 2.531 1.359 4.031h4.5zM14.484 19.594l0.703-1.5-0.609-1.078h-5.109l-0.656 1.078 0.703 1.5q1.172 0.422 2.484 0.422t2.484-0.422zM7.078 17.109l0.797-1.359-1.453-4.359-1.406-0.469-0.984 0.75q0 0.047-0.023 0.141t-0.023 0.188q0 1.219 0.586 2.742t1.383 2.461zM9.656 4.359q-1.172 0.328-2.461 1.313t-1.945 2.016l0.422 1.359 1.359 0.422 3.984-2.766v-1.406zM12.984 5.297v1.406l3.984 2.766 1.359-0.422 0.422-1.359q-0.656-1.031-1.945-2.016t-2.461-1.313zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z'},
    {name:'Car Services' , icon:'M5.016 11.016h13.969l-1.5-4.5h-10.969zM17.484 15.984q0.609 0 1.055-0.445t0.445-1.055-0.445-1.055-1.055-0.445-1.055 0.445-0.445 1.055 0.445 1.055 1.055 0.445zM6.516 15.984q0.609 0 1.055-0.445t0.445-1.055-0.445-1.055-1.055-0.445-1.055 0.445-0.445 1.055 0.445 1.055 1.055 0.445zM18.938 6l2.063 6v8.016q0 0.422-0.281 0.703t-0.703 0.281h-1.031q-0.422 0-0.703-0.281t-0.281-0.703v-1.031h-12v1.031q0 0.422-0.281 0.703t-0.703 0.281h-1.031q-0.422 0-0.703-0.281t-0.281-0.703v-8.016l2.063-6q0.281-0.984 1.453-0.984h10.969q1.172 0 1.453 0.984z'},
    {name:'Home Services' , icon:'M9.984 20.016h-4.969v-8.016h-3l9.984-9 9.984 9h-3v8.016h-4.969v-6h-4.031v6z'},
    {name:'Health' , icon:'M20.016 6h-4.031v-2.016q0-0.797-0.586-1.383t-1.383-0.586h-4.031q-0.797 0-1.383 0.586t-0.586 1.383v2.016h-4.031q-0.797 0-1.383 0.586t-0.586 1.43v12q0 0.797 0.586 1.383t1.383 0.586h16.031q0.797 0 1.383-0.586t0.586-1.383v-12q0-0.844-0.586-1.43t-1.383-0.586zM9.984 3.984h4.031v2.016h-4.031v-2.016zM15.984 15h-3v3h-1.969v-3h-3v-2.016h3v-3h1.969v3h3v2.016z'},
    {name:'Beauty & Spas' , icon:'M15.984 11.016h-0.984v-8.016q0-0.844-0.586-1.43t-1.43-0.586h-1.969q-0.844 0-1.43 0.586t-0.586 1.43v8.016h-0.984q-1.406 0-2.531 0.656t-1.805 1.805-0.68 2.508v7.031h18v-7.031q0-1.359-0.68-2.508t-1.805-1.805-2.531-0.656zM18.984 21h-1.969v-3q0-0.422-0.305-0.703t-0.727-0.281q-0.375 0-0.68 0.281t-0.305 0.703v3h-2.016v-3q0-0.422-0.281-0.703t-0.703-0.281-0.703 0.281-0.281 0.703v3h-2.016v-3q0-0.422-0.305-0.703t-0.68-0.281q-0.422 0-0.727 0.281t-0.305 0.703v3h-1.969v-5.016q0-0.797 0.398-1.477t1.078-1.102 1.523-0.422h7.969q0.844 0 1.523 0.422t1.078 1.102 0.398 1.477v5.016z'},
    ];

  
  const handleSearch = (termToSearch) => {
    if ( location === '' || (term === '' && location === '')) return;

    try {
      clearBusinesses();
      setSearchParams({term : termToSearch, location, sortBy});
      searchBusinesses(termToSearch, location, sortBy, 0);
    } catch (e) {
      console.error(e);
      return;
    }
  };  

  return (
    <div className={styles.container}>
      <h2 className={styles.terms_header} >Search in {location}</h2>
      <div className={styles.terms_list} >
        {terms.map(
          t => (
            <div className={styles.term_card} key={t.name} onClick={() => handleSearch(t.name)} >
              <h3 className={styles.term_name}>{t.name}</h3>

              <svg className={styles.term_icon} xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
                  <path d={t.icon}></path>
              </svg>
            </div>
          )
      )}
      </div>
    </div>
  );
}
